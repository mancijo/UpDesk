<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Dashboard Supervisor - UpDesk</title>
  <link rel="stylesheet" href="../static/css/home.css"/>
</head>

<body>

  <nav class="navbar">
    <div class="logo">UpDesk</div>

    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/chamado">Chamados</a>
      <a href="/ger-usuarios">Usuários</a>
      <a href="/triagem">Triagem</a>
    </div>

    <div class="user-menu">
      <button class="user-btn" id="userBtn" aria-haspopup="true" aria-expanded="false">{{ nome_usuario }}</button>
      <div class="dropdown" id="userDropdown">
        <a href="/perfil">Meu Perfil</a>
        <a href="/meus-chamados">Meus Chamados</a>
        <a href="/logout">Sair</a>
      </div>
    </div>
  </nav> <!-- Dropdown do usuário -->

  <div class="dashboard">
    <h2>Olá, Bem-vindo, {{ nome_usuario }}!</h2>

    <div class="cards">
      <div class="card">
        <h4>Chamados Abertos</h4>
          {% for chamados in chamado %}
            <span>{{ chamados|length }}</span>
          {% endfor %} 
        
      </div>
      <div class="card">
        <h4>Chamados em Triagem</h4>
        <span>15</span>
      </div>
      <div class="card">
        <h4>Chamados com Solução IA</h4>
        <span>15</span>
      </div>
      <div class="card">
        <h4>Chamados Finalizados</h4>
        <span>15</span>
      </div>
    </div>

    <div class="actions">
      <button class="action-btn" onclick="location.href='/chamado'">Abrir Chamado</button>
      <button class="action-btn" onclick="location.href='/ver-chamado'">Monitoramento de Chamados</button>
      <button class="action-btn" onclick="location.href='/ger_usuarios'">Gerenciar Usuário</button>
      <button class="action-btn" onclick="location.href='/triagem'">Painel da Triagem</button>
    </div>

    <footer>
      UpDesk - Sistema de Gerenciamento de Chamados com IA
    </footer>
  </div>

  <script>
    // Toggle dropdown do usuário
    const userBtn = document.getElementById('userBtn');
    const userDropdown = document.getElementById('userDropdown');

    userBtn.addEventListener('click', () => {
      const isExpanded = userBtn.getAttribute('aria-expanded') === 'true';
      userDropdown.style.display = isExpanded ? 'none' : 'flex';
      userBtn.setAttribute('aria-expanded', !isExpanded);
    });

    // Fechar dropdown clicando fora
    document.addEventListener('click', (e) => {
      if (!userBtn.contains(e.target) && !userDropdown.contains(e.target)) {
        userDropdown.style.display = 'none';
        userBtn.setAttribute('aria-expanded', false);
      }
    });
  </script>

</body>

</html>