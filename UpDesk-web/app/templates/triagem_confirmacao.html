{% extends 'base.html' %}

{% block title %}Triagem Confirmada - Chamado #{{ chamado.chamado_ID }}{% endblock %}

{% block body %}
<div class="container mt-5 mb-5 triagem-confirmacao-container">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
            <div class="card custom-card shadow-sm border-0 triagem-feedback-card">
                <div class="card-header d-flex justify-content-between align-items-center bg-white border-bottom" style="border-bottom:1px solid var(--cor-borda);">
                    <h5 class="mb-0" style="color: var(--cor-primaria);">Triagem Confirmada</h5>
                    <span class="badge bg-secondary">#{{ chamado.chamado_ID }}</span>
                </div>
                <div class="card-body">
                    <p class="lead mb-3">O chamado foi triado com sucesso.</p>
                    <div class="row g-3 info-grid">
                        <div class="col-12 col-md-6">
                            <div class="info-box p-3 border rounded">
                                <h6 class="text-muted mb-1">Destino / Setor</h6>
                                <p class="mb-0 fw-semibold">{{ encaminhado }}</p>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="info-box p-3 border rounded">
                                <h6 class="text-muted mb-1">Prioridade</h6>
                                <p class="mb-0">
                                    {% if prioridade == 'Alta' %}
                                        <span class="badge bg-danger">Alta</span>
                                    {% elif prioridade == 'Média' %}
                                        <span class="badge bg-warning text-dark">Média</span>
                                    {% elif prioridade == 'Baixa' %}
                                        <span class="badge bg-info text-dark">Baixa</span>
                                    {% elif prioridade == 'Não Classificada' %}
                                        <span class="badge bg-secondary">Não Classificada</span>
                                    {% else %}
                                        <span class="badge bg-secondary">{{ prioridade }}</span>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="info-box p-3 border rounded">
                                <h6 class="text-muted mb-1">Título</h6>
                                <p class="mb-0" title="{{ chamado.titulo_Chamado }}">{{ chamado.titulo_Chamado }}</p>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="info-box p-3 border rounded">
                                <h6 class="text-muted mb-1">ID do Chamado</h6>
                                <p class="mb-0">#{{ chamado.chamado_ID }}</p>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="info-box p-3 border rounded">
                                <h6 class="text-muted mb-2">Comentário Adicionado</h6>
                                {% if comentario %}
                                <blockquote class="blockquote mb-0">
                                    <p class="small">"{{ comentario }}"</p>
                                </blockquote>
                                {% else %}
                                <p class="text-muted fst-italic mb-0">Nenhum comentário foi adicionado.</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <hr class="my-4">
                    <div class="d-flex flex-wrap gap-2 justify-content-between align-items-center action-row">
                        <div class="btn-group">
                            <a href="{{ url_for('chamados.triagem') }}" class="btn btn-outline-secondary rounded-pill custom-btn" style="width:auto;">
                                <i class="bi bi-arrow-left"></i> Voltar à Triagem
                            </a>
                        </div>
                        <a href="{{ url_for('chamados.ver_chamados') }}" class="btn btn-primary rounded-pill custom-btn" style="width:auto;">
                            <i class="bi bi-list-task"></i> Monitoramento de Chamados
                        </a>
                    </div>
                </div>
                <div class="card-footer text-center small text-muted">
                    <span>Data da triagem: {{ chamado.dataUltimaModificacao.strftime('%d/%m/%Y %H:%M') if chamado.dataUltimaModificacao else chamado.dataAbertura.strftime('%d/%m/%Y %H:%M') }}</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
