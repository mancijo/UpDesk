{% extends 'base.html' %}

{% block title %}Transferir Chamado #{{ chamado.chamado_ID }} - UpDesk{% endblock %}

{% block body %}
    <div class="container mt-4 mb-4">
        <div class="row">
            <div class="col-lg-7 mb-4">
                <div class="main-card">
                    <div class="row h-100">
                        <!-- Dados do Chamado (Dinâmico) -->
                        <div class="col-md-5 ticket-data">
                            <h5 class="card-title-custom">Dados Abertura Chamado</h5>
                            <p><strong>Aberto em:</strong> {{ chamado.dataAbertura.strftime('%d/%m/%Y %H:%M') }}</p>
                            {% if chamado.solicitante %}
                            <p><strong>Solicitante:</strong><br>
                                {{ chamado.solicitante.nome }}<br>
                                {{ chamado.solicitante.email }}<br>
                                Ramal: {{ chamado.solicitante.telefone }}
                            </p>
                            {% endif %}
                            <p><strong>Status:</strong> {{ chamado.status_Chamado }}</p>
                            <p><strong>Categoria:</strong> {{ chamado.categoria_Chamado }}</p>
                        </div>
                        <!-- Título e Descrição (Dinâmico) -->
                        <div class="col-md-7">
                            <div class="ticket-message-box">
                                <span class="ticket-title-badge">{{ chamado.titulo_Chamado }}</span>
                                <blockquote>
                                    "{{ chamado.descricao_Chamado }}"
                                </blockquote>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-5 mb-4">
                <!-- Formulário de Transferência -->
                <div class="main-card">
                    <h5 class="card-title-custom">Prioridade do chamado</h5>
                    <form method="POST" action="{{ url_for('chamados.transferir_chamado', chamado_id=chamado.chamado_ID) }}">
                    <ul class="priority-options">
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="prioridade" id="prio-baixa" value="Baixa" {% if chamado.prioridade_Chamado == 'Baixa' %}checked{% endif %}>
                                <label class="form-check-label" for="prio-baixa">Baixa</label>
                            </div>
                        </li>
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="prioridade" id="prio-media" value="Média" {% if chamado.prioridade_Chamado == 'Média' %}checked{% endif %}>
                                <label class="form-check-label" for="prio-media">Média</label>
                            </div>
                        </li>
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="prioridade" id="prio-alta" value="Alta" {% if chamado.prioridade_Chamado == 'Alta' %}checked{% endif %}>
                                <label class="form-check-label" for="prio-alta">Alta</label>
                            </div>
                        </li>
                    </ul>
                    <h5 class="card-title-custom">Transferir para</h5>

                    <ul class="transferir-opcoes">
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="transferir" id="setor-ti-n1" value="setor-ti-n1">
                                <label class="form-check-label" for="setor-ti-n1">Transferir para setor TI N1</label>
                            </div>
                        </li>
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="transferir" id="setor-ti-n2" value="setor-ti-n2" {% if True %}checked{% endif %}>
                                <label class="form-check-label" for="setor-ti-n2">Transferir para setor TI N2</label>
                            </div>
                        </li>
                        <li>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="transferir" id="setor-triagem" value="setor-triagem">
                                <label class="form-check-label" for="setor-triagem">Transferir para setor Triagem</label>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
                <div class="footer-actions">
            <a href="{{ url_for('chamados.triagem') }}" class="btn btn-voltar rounded-pill">Voltar</a>
            <button type="submit" class="btn btn-finalizar rounded-pill">Finalizar</button>
        </div>
        </form>
    </div>
{% endblock %}
