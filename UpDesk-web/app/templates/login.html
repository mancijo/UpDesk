<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UpDesk - Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body class="login-page-body">
    <div class="login-card">
        <h1 class="login-card__brand">UpDesk</h1>
        <form id="loginForm" class="w-100" data-login-url="{{ url_for('auth.login') }}" novalidate>
            {{ form.hidden_tag() }} 

            <div class="input-group mb-3">
                {{ form.Email.label(class="visually-hidden") }}
                <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                {{ form.Email(class="form-control", placeholder="E-mail", id="email") }}
            </div>

            <div class="input-group mb-4">
                {{ form.senha.label(class="visually-hidden") }}
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                {{ form.senha(class="form-control", placeholder="Senha", id="senha") }}
            </div>

                        <!--
  Template da Página de Login

  Responsabilidade:
  - Exibir o formulário de autenticação para o usuário.
  - Utiliza o Flask-WTF para renderizar o formulário, garantindo segurança (CSRF) e consistência com o backend.
  - Interage com o login.js para fornecer uma experiência de login assíncrona (sem recarregar a página).
-->
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UpDesk - Login</title>

    <!-- Dependências de CSS (Bootstrap e Fontes) via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Arquivo de CSS principal da aplicação, que importa todas as folhas de estilo -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body class="login-page-body">
    <div class="login-card">
        <h1 class="login-card__brand">UpDesk</h1>

        <!-- 
          Formulário de Login
          - `id="loginForm"`: Usado pelo JavaScript para capturar o evento de submit.
          - `data-login-url`: Passa a URL de login do Flask para o JavaScript de forma dinâmica e segura.
          - `novalidate`: Desativa a validação padrão do navegador, pois a validação será tratada via JavaScript e backend.
        -->
        <form id="loginForm" class="w-100" data-login-url="{{ url_for('auth.login') }}" novalidate>
            
            <!-- 
              Token CSRF (Cross-Site Request Forgery)
              Essencial para a segurança do formulário. Gerado automaticamente pelo Flask-WTF.
            -->
            {{ form.hidden_tag() }} 

            <div class="input-group mb-3">
                <!-- 
                  Label para acessibilidade: Fica escondida visualmente (`visually-hidden`), 
                  mas é lida por leitores de tela, associando o campo ao seu propósito.
                -->
                {{ form.Email.label(class="visually-hidden") }}
                <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                <!-- Campo de email renderizado pelo Flask-WTF. Atributos HTML são passados como argumentos. -->
                {{ form.Email(class="form-control", placeholder="E-mail", id="email") }}
            </div>

            <div class="input-group mb-4">
                {{ form.senha.label(class="visually-hidden") }}
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                {{ form.senha(class="form-control", placeholder="Senha", id="senha") }}
            </div>

            <!--
              Botão de Submit Manual
              Usamos um <button> em vez do {{ form.Submit() }} do Flask-WTF para permitir 
              a inserção de conteúdo dinâmico (o "spinner" de carregamento) via JavaScript,
              melhorando a experiência do usuário.
            -->
            <button type="submit" class="btn btn-primary w-100 btn-login">Login</button>
        </form>

        <!-- Área para exibir mensagens de erro ou sucesso para o usuário -->
        <div class="message mt-3" id="mensagem"></div>

        <!-- Link para recuperação de senha (atualmente um placeholder) -->
        <a href="#" class="text-decoration-none mt-3">Esqueceu sua senha?</a>
    </div>

    <!-- Dependências de JavaScript (Bootstrap) via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    
    <!-- Script para lidar com a lógica de login assíncrono -->
    <script src="{{ url_for('static', filename='js/login.js') }}"></script>
</body>

</html>
        </form>
        <div class="message mt-3" id="mensagem"></div>
        <a href="#" class="text-decoration-none mt-3">Esqueceu sua senha?</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/login.js') }}"></script>
</body>

</html>