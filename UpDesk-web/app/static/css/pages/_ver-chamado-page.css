/* ============================ Ver Chamados (CSS Consolidado - versão limpa) ============================ */
/* Card principal */
.ver-chamado-card { background:#fff; border:1px solid #e5e8ec; border-radius:14px; box-shadow:0 4px 10px -2px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.04); padding:.75rem .9rem .25rem; display:flex; flex-direction:column; min-height:520px; transition:box-shadow .25s ease, transform .25s ease; }
.ver-chamado-card:hover { box-shadow:0 6px 18px -4px rgba(0,0,0,.12),0 3px 8px -2px rgba(0,0,0,.06); }
.ver-chamado-card .card-header { background:transparent; border:none; padding:.4rem .4rem .25rem; }
.ver-chamado-card .card-header h1 { font-size:1.4rem; font-weight:600; margin:0; }
.ver-chamado-card .card-body { flex:1; display:flex; flex-direction:column; padding:.4rem .4rem .75rem; }
.calls-list-section { flex:1; display:flex; flex-direction:column; }

/* Filtros e título */
.filters-section { background:#f9fafb; border:1px solid #e5e8ec; border-radius:10px; padding:.75rem .9rem; }
.filters-section select,.filters-section input { font-size:.9rem; }
.ver-chamado-card .filters-section { margin-bottom:.6rem; }
.calls-heading { display:flex; align-items:baseline; gap:.5rem; margin-top:1.2rem; padding:0 .15rem; }
.calls-heading .total-count { font-size:.85rem; font-weight:500; }

/* Tabela base */
.calls-table { font-size:.88rem; margin-bottom:0; width:100%; table-layout:fixed; }
.calls-table thead { background:#f1f4f8; }
.calls-table thead th { border-bottom:1px solid #d5dae0; font-weight:600; padding:.5rem .6rem; white-space:nowrap; }
.calls-table tbody tr { transition:background .15s ease; cursor:pointer; height:48px; }
.calls-table tbody tr:hover { background:#f9fbfd; }
.calls-table td { vertical-align:middle; padding:.5rem .6rem; }
.calls-table td.title-cell { padding-left:.75rem; }
.calls-table td.table__actions { padding:0 .4rem; text-align:right; overflow:visible; }
.col-id { width:66px; }
.calls-table td[data-label="ID"] { font-family:var(--font-mono,'SFMono-Regular','Courier New',monospace); font-size:.70rem; letter-spacing:.5px; }
.calls-table td[data-label="ID"] .id-link { display:inline-block; padding:2px 4px; border-radius:4px; color:#64748b; text-decoration:none; transition:background .15s ease,color .15s ease; }
.calls-table td[data-label="ID"] .id-link:hover { background:#e9eef3; color:#1f2933; text-decoration:none; }
.calls-table td[data-label="ID"] .id-link:focus { outline:2px solid #0d6efd; outline-offset:1px; background:#e9eef3; color:#0d253a; }
.calls-table tbody tr:hover td[data-label="ID"] .id-link { color:#1f2933; }

/* Larguras desktop */
.col-title { width:44%; }
.col-prioridade { width:10%; }
.col-status { width:12%; }
.col-data { width:18%; }
.col-acoes { width:12%; min-width:90px; }
th.acoes-col, td.acoes-col { text-align:right; vertical-align:middle; }

/* Contêiner tabela: permite scroll horizontal suave em telas médias/estreitas */
.table-container { position:relative; }
@media (max-width:992px){
    .table-container { overflow-x:auto; scrollbar-gutter:stable; }
    .table-container::-webkit-scrollbar { height:8px; }
    .table-container::-webkit-scrollbar-track { background:transparent; }
    .table-container::-webkit-scrollbar-thumb { background:#c7ced6; border-radius:20px; }
    .table-container::-webkit-scrollbar-thumb:hover { background:#aab4bf; }
    /* Gradiente de dica de overflow */
    .table-container:after { content:""; position:absolute; top:0; right:0; width:40px; height:100%; pointer-events:none; background:linear-gradient(to left, rgba(255,255,255,.95), rgba(255,255,255,0)); }
}
/* Ajustes intermediários para evitar overflow horizontal em tablets (usuario-final) */
@media (max-width:860px){
    body.usuario-final .col-title { width:53%; }
    body.usuario-final .col-data { width:17%; }
    body.usuario-final .col-acoes { width:30%; }
}
@media (max-width:790px){
    /* Permitir encolher automaticamente exceto ID */
    .calls-table col.col-title, .calls-table col.col-data, .calls-table col.col-acoes, body.usuario-final .col-title, body.usuario-final .col-data, body.usuario-final .col-acoes { width:auto !important; }
    .calls-table td { padding:.45rem .5rem; }
    .calls-table td.table__actions { padding:.3rem .45rem; }
}

/* Ajustes específicos quando é usuário final (sem prioridade/status) para evitar truncar a hora e excesso de espaço em Ações */
body.usuario-final .col-title { width:56%; }
body.usuario-final .col-data { width:18%; }
body.usuario-final .col-acoes { width:26%; }
body.usuario-final .td-acoes.acoes-single { justify-content:flex-start; }
body.usuario-final .td-acoes.acoes-single .chamado-pending { margin-left:.25rem; }
/* Garantir que o horário completo caiba – permitir crescimento se necessário */
body.usuario-final .calls-table td.calls-table__date-cell { white-space:nowrap; }
/* Exibir data em formato embutido no modo card para telas muito pequenas */
.mobile-date { display:none; }

/* Grupo de ações */
.td-acoes { display:flex; justify-content:flex-end; align-items:center; gap:8px; white-space:nowrap; }
.td-acoes.acoes-single { justify-content:flex-start; }
.actions-group { display:flex; flex-direction:row; justify-content:flex-end; align-items:center; gap:8px; width:100%; white-space:nowrap; flex-wrap:nowrap; }
.acoes-single .actions-group { justify-content:flex-start; }
/* Tornar os botões compactos por padrão (mostrando só ícone quando necessário) */
.actions-group .btn { min-width:56px; padding:.28rem .6rem; font-size:.78rem; font-weight:600; display:inline-flex; align-items:center; justify-content:center; border-radius:6px; white-space:nowrap; }
/* Em telas maiores, permitir rótulos e largura um pouco maior */
.actions-group .btn .btn-label { display:none; }
@media (min-width:992px){
    /* Desktop: allow slightly larger buttons but keep compact to avoid overlap */
    .actions-group .btn { min-width:76px; padding:.32rem .6rem; }
    .actions-group .btn .btn-label { display:inline; }
}
.actions-group .btn .btn-label { display:none; }

/* Título */
.title-cell .title-text { color:#1f2933; font-weight:600; font-size:15px; display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.title-sub { margin-top:6px; font-size:12px; color:var(--cor-texto-secundario,#64748b); }

/* Prioridade */
.badge-pri { display:inline-flex; align-items:center; justify-content:center; height:28px; padding:0 10px; border-radius:999px; font-weight:700; font-size:12px; line-height:1; }
.badge-pri.critica { background:#fdecea; color:#922b21; }
.badge-pri.alta { background:#fff4e5; color:#7a4a00; }
.badge-pri.media { background:#fffbe6; color:#7a5f00; }
.badge-pri.baixa { background:#e6f4ea; color:#0f5132; }
.badge-pri.nao-classificada { background:#f1f3f5; color:#495057; }

/* Status */
.status-tag { display:inline-block; padding:6px 8px; border-radius:999px; font-weight:600; font-size:12px; white-space:nowrap; }
.status-aberto { background:#e9f2ff; color:#0b5ed7; }
.status-em-atendimento { background:#eef2ff; color:#3b3fbf; }
.status-resolvido { background:#e6f7ea; color:#198754; }
.status-transferido { background:#f1f3f5; color:#6c757d; }

/* Badge Triagem */
.chamado-pending { background:#e2e6ea; color:#495057; padding:.45rem .75rem; font-size:.70rem; font-weight:600; border-radius:4px; display:inline-flex; align-items:center; gap:.35rem; border:1px solid #d6d8db; letter-spacing:.2px; }
.chamado-pending i { font-size:.85rem; line-height:1; }

/* Bottom bar */
.bottom-bar { background:#fff; border-top:1px solid #e5e8ec; padding:.65rem .9rem; margin-top:auto; }
.bottom-bar .btn { font-size:.7rem; }

/* Filtro: remover opções irrelevantes usuário final */
body:not(.is-staff) .filters-section #status-filter option[value="Em Atendimento"],
body:not(.is-staff) .filters-section #status-filter option[value="Transferido"],
body:not(.is-staff) .filters-section #status-filter option[value="Agendado"] { display:none; }

/* Truncamento título progressivo */
@media (max-width:992px){ .calls-table tbody tr.call-row { height:auto !important; } .title-cell .title-text { display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; line-clamp:2; white-space:normal; } }
@media (max-width:576px){ .calls-table tbody tr.call-row .title-cell .title-text { -webkit-line-clamp:2; line-clamp:2; } }
@media (max-width:360px){ .calls-table tbody tr.call-row .title-cell .title-text { -webkit-line-clamp:3; line-clamp:3; } }

/* Empilhamento botões <=768px */
@media (max-width:768px){
    .td-acoes { flex-direction:column; gap:6px; justify-content:center; }
    .actions-group { flex-wrap:wrap; }
    .actions-group .btn { min-width:78px; padding:.32rem .6rem; font-size:.72rem; }
}
/* Filtros em telas estreitas */
@media (max-width:600px){
    .filters-section { padding:.55rem .65rem; }
    .filters-section .form-select, .filters-section input.form-control { font-size:.78rem; padding:.4rem .55rem; }
    .filters-section .btn { font-size:.75rem; padding:.45rem .55rem; }
}

/* Card mode <=576px */
@media (max-width:576px){
    .calls-table thead { display:none !important; }
    .calls-table col.col-prioridade,
    .calls-table col.col-status,
    .calls-table col.col-data,
    .calls-table th.col-prioridade,
    .calls-table th.col-status,
    .calls-table th.col-data,
    .calls-table td.calls-table__priority-cell,
    .calls-table td.calls-table__status-cell,
    .calls-table td.calls-table__date-cell { display:none !important; }
    .calls-table tbody tr.call-row { display:block !important; background:#fff !important; border:1px solid #e5e8ec !important; border-radius:12px !important; padding:.55rem .65rem .6rem !important; margin:.55rem 0 !important; box-shadow:0 3px 8px rgba(0,0,0,.05) !important; height:auto !important; }
    .calls-table tbody tr.call-row td { display:block !important; width:100% !important; padding:.25rem 0 !important; border:none !important; }
    .calls-table tbody tr.call-row td.title-cell { margin-bottom:.15rem !important; }
    .calls-table tbody tr.call-row td.table__actions, .calls-table tbody tr.call-row td.acoes-col.td-acoes { margin-top:.45rem !important; display:flex !important; width:100% !important; justify-content:space-between !important; gap:.5rem !important; padding-top:.3rem !important; border-top:1px solid #eef1f4 !important; text-align:center !important; }
    .calls-table tbody tr.call-row td.table__actions .actions-group, .calls-table tbody tr.call-row td.acoes-col.td-acoes .actions-group { width:100% !important; display:flex !important; justify-content:space-between !important; gap:.5rem !important; flex-wrap:nowrap !important; }
    .actions-group .btn { flex:1 1 0 !important; min-width:0 !important; padding:.42rem .55rem !important; font-size:.70rem !important; font-weight:600 !important; line-height:1.1 !important; border-radius:4px !important; }
    .chamado-pending { font-size:.65rem !important; padding:.38rem .6rem !important; }
    /* Data móvel dentro do bloco do título */
    .mobile-date { display:block !important; font-size:.62rem !important; color:#64748b !important; margin-top:2px !important; letter-spacing:.25px; }
}

/* Micro breakpoint <=360px */
@media (max-width:360px){
    .actions-group .btn { font-size:.62rem !important; padding:.35rem .45rem !important; }
    .chamado-pending { font-size:.60rem !important; padding:.34rem .5rem !important; }
}
/* Modal ajustes mobile */
@media (max-width:576px){
    #visualizarChamadoModal .modal-content { border-radius:16px; }
    #visualizarChamadoModal .modal-body { padding:0.75rem 0.95rem 0.9rem; }
    #visualizarChamadoModal .info-box { padding:.6rem .7rem !important; }
    #visualizarChamadoModal .description-box { font-size:.75rem; line-height:1.35; }
    #visualizarChamadoModal .modal-footer { padding:.55rem .9rem; }
    #visualizarChamadoModal h1.modal-title { font-size:1rem; }
}
@media (max-width:400px){
    #visualizarChamadoModal .btn { font-size:.65rem; padding:.35rem .55rem; }
}
/* ============================ Fim versão limpa ============================ */
/* ============================ Fim CSS Consolidado ============================ */