<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="UpDesk - Sistema de gerenciamento de chamados para suporte técnico.">
    <meta name="keywords" content="UpDesk, chamados, suporte técnico, gerenciamento, TI">
    <title>UpDesk</title>
    <!-- O caminho para os arquivos estáticos foi ajustado para ser relativo -->
    <link rel="icon" href="../static/img/favicon.svg" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../static/css/main.css">
    <link rel="stylesheet" href="../static/css/navbar.css">
    <!-- Placeholder para CSS específico da página -->
    <div id="page-specific-css"></div>
</head>

<body class="d-flex flex-column min-vh-100"> <!-- Added Bootstrap classes for sticky footer -->
    <!-- Placeholder para a barra de navegação. Será carregado via JavaScript. -->
    <div id="navbar-placeholder"></div>

    <div class="content-wrapper" id="main-content">
    <main class="flex-grow-1">
        <!-- O conteúdo principal da página (ex: home.html) será carregado aqui -->
    </main>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>

    <!-- Scripts para carregar componentes reutilizáveis -->
    <script>
        // Função para carregar conteúdo de um arquivo em um elemento
        async function loadComponent(url, placeholderId) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`Erro ao carregar ${url}: ${response.statusText}`);
                const data = await response.text();
                document.getElementById(placeholderId).innerHTML = data;
            } catch (error) {
                console.error(`Falha ao carregar componente: ${error.message}`);
                document.getElementById(placeholderId).innerHTML = `<p class="text-danger">Erro ao carregar componente de ${url}.</p>`;
            }
        }

        // Função para carregar o conteúdo principal da página
        async function loadPageContent(pageUrl) {
            await loadComponent(pageUrl, 'main-content');
            // Extrai e executa scripts do conteúdo carregado
            const mainContent = document.getElementById('main-content');
            const scripts = mainContent.querySelectorAll("script");
            scripts.forEach(script => {
                const newScript = document.createElement("script");
                if (script.src) {
                    newScript.src = script.src;
                } else {
                    newScript.innerHTML = script.innerHTML;
                }
                document.body.appendChild(newScript);
                script.remove(); // Remove o script original para não executar duas vezes
            });
        }

        document.addEventListener("DOMContentLoaded", async () => {
            await loadComponent('../templates/navbar.html', 'navbar-placeholder');
            // Carrega a página home.html por padrão
            await loadPageContent('../templates/home.html');
        });
    </script>
<footer class="footer">
    <p>&copy; 2025 UpDesk. Todos os direitos reservados.</p>
</footer>

</body>

</html>